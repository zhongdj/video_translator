# 视频翻译工厂 Pro - 使用指南

## 🎯 核心改进

本次更新引入了**质量优先的三阶段工作流**，解决了翻译质量不稳定和错误发现太晚的问题。

## 📋 三阶段工作流

### 阶段 1: 生成和检查 ⚡（快速）
- ASR 语音识别
- 基于上下文的翻译
- AI 质量检查
- **耗时**: 约 1-3 分钟

### 阶段 2: 审核和修改 ✏️（可选）
- 可视化查看所有翻译
- 高亮显示有问题的片段
- 在线编辑修正
- 批准后继续
- **耗时**: 根据问题数量而定

### 阶段 3: 语音合成 🎤（耗时）
- TTS 语音克隆
- 视频合成
- 字幕烧录
- **耗时**: 约 5-15 分钟

## 🚀 快速开始

### 1. 准备翻译上下文

首先，为你的视频领域创建专属上下文：

```
进入"翻译上下文管理"标签页
→ 输入上下文名称（如 inline_skating）
→ 编写系统提示词
→ 添加术语表
→ 保存
```

**示例：轮滑教学视频**

**系统提示词**：
```
你是一位专业的轮滑（Inline Skating）视频字幕翻译专家。
翻译要求：
1. 准确使用轮滑专业术语
2. 保持教学内容的清晰性和准确性
3. 动作描述要精确，避免歧义
4. 保持口语化，适合教学视频观看
```

**术语表**：
```
inline skating = 轮滑
crossover = 交叉步
t-stop = T字刹
powerslide = 侧刹
edge = 刃
stride = 滑步
```

### 2. 处理第一个视频

```
1. 上传视频
2. 选择模型（推荐 Whisper medium + Qwen 7B）
3. 选择刚创建的上下文（inline_skating）
4. 点击"步骤1: 生成和检查"
```

### 3. 查看质量报告

系统会显示：
- ✅ 整体质量评级
- ⚠️ 发现的问题数量
- 📊 问题严重度分布

**质量评级说明**：
- `excellent`: 无明显问题，可直接使用
- `good`: 少量低级问题，建议快速检查
- `fair`: 中等问题，需要审核
- `poor`: 严重问题，必须修改

### 4. 审核和修改（可选）

如果质量报告显示需要审核：

```
展开"步骤2: 审核和修改"
→ 查看标记为 ⚠️ 的片段
→ 在"翻译"列中直接编辑
→ 点击"保存修改"
→ 确认无误后点击"批准翻译"
```

**审核技巧**：
- 优先处理高严重度（high）问题
- 注意术语使用是否准确
- 检查是否有过长/过短的翻译
- 确保符合口语化风格

### 5. 语音合成

```
展开"步骤3: 语音合成"
→ 选择是否启用语音克隆
→ 上传参考音频（可选）
→ 点击"开始合成"
```

## 💡 最佳实践

### 首次处理新领域

1. **使用通用上下文**进行第一次尝试
2. **记录问题**：注意哪些术语翻译不准确
3. **创建专属上下文**：根据问题编写提示词
4. **再次测试**：用新上下文重新处理
5. **迭代优化**：持续改进上下文配置

### 批量处理同领域视频

1. **测试上下文**：先用1-2个视频测试
2. **完善配置**：根据测试结果调整
3. **批量应用**：对所有视频使用相同上下文
4. **选择性审核**：只审核质量评级 < good 的视频

### 提示词编写建议

好的提示词包含：

```
1. 角色定位：你是XXX专家
2. 翻译要求（3-5条）：
   - 准确性要求
   - 风格要求
   - 特殊处理
3. 具体示例（可选）
```

**❌ 不好的提示词**：
```
你是翻译专家，请准确翻译。
```

**✅ 好的提示词**：
```
你是一位专业的编程教学视频翻译专家。
翻译要求：
1. 保留所有代码和函数名不翻译
2. 技术术语使用业界标准译法
3. 保持口语化，避免书面语
4. 简洁明了，适合快速理解
```

## 🔧 技术细节

### 质量检查机制

系统会自动检查：

1. **术语使用**: 是否使用了术语表中的标准译法
2. **长度异常**: 译文是否过长（冗余）或过短（遗漏）
3. **空白翻译**: 是否有未翻译的片段
4. **上下文一致性**: （未来功能）前后文是否连贯

### 严重度分级

- **High（高）**: 必须修改，如术语错误、遗漏翻译
- **Medium（中）**: 建议修改，如表达冗余、风格不符
- **Low（低）**: 可选修改，如细微的表达差异

### 缓存机制

系统会缓存：
- ASR 识别结果
- 翻译结果（包含上下文标识）
- 语音合成结果

**注意**: 更改翻译上下文后，需要清除旧缓存才能生效。

## 📁 文件结构

```
project/
├── translation_contexts/     # 翻译上下文配置
│   ├── general.json
│   ├── inline_skating.json
│   └── programming.json
├── output/                   # 视频输出目录
│   ├── video_name.zh.srt
│   ├── video_name.en.srt
│   ├── video_name.zh_en.ass
│   ├── video_name_voiced.mp4
│   └── video_name_voiced_subtitled.mp4
└── .cache/                   # 缓存目录
    ├── subtitles/
    └── audio/
```

## 🐛 故障排除

### 质量检查误报

**问题**: 系统标记了不是问题的翻译

**解决**:
1. 在审核界面检查具体原因
2. 如果确认无误，直接批准
3. 如果经常误报，调整术语表或提示词

### 翻译质量仍然不好

**原因**:
1. 提示词不够具体
2. 术语表不完整
3. 源语音识别有误

**解决**:
1. 参考"提示词编写建议"改进提示词
2. 补充术语表
3. 检查 ASR 结果，必要时手动修正

### 批准后无法继续

**原因**: 可能是会话状态丢失

**解决**:
1. 不要刷新页面
2. 按顺序完成三个步骤
3. 如果已刷新，重新从步骤1开始

## 📊 性能对比

### 传统流程
```
上传 → ASR → 翻译 → TTS → 发现问题 → 重新处理
总耗时: 15-30分钟
```

### 新流程（质量好）
```
上传 → ASR → 翻译 → 检查 ✅ → TTS
总耗时: 8-15分钟（节省约50%）
```

### 新流程（需审核）
```
上传 → ASR → 翻译 → 检查 ⚠️ → 审核(3分钟) → TTS
总耗时: 11-18分钟（仍节省约30%）
```

## 🎓 学习曲线

- **新手**: 使用预设上下文，重点学习审核界面
- **进阶**: 创建简单的自定义上下文
- **专家**: 针对特定场景优化提示词和术语表

## 📞 获取帮助

- 查看"架构说明"标签页了解设计理念
- 参考预设的 `inline_skating` 上下文作为示例
- 在审核界面查看具体的质量问题说明

---

**提示**: 第一次使用新领域时，投入10-15分钟创建好的翻译上下文，可以在后续批量处理中节省数小时！